<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Prompt&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Prompt', sans-serif;
        }
    </style>
</head>
<body>
    <div class="container mt-3">
        <div class="row">
            <h2>ตรวจสอบรุ่นที่เล่น Call of Duty Mobile ได้</h2>
        </div>
        <div class="row mb-3">
            <div class="col-12">
                <div class="text-danger">*ไม่ใช่ระบบของผู้สร้างเกม</div>
                <div class="text-danger">*ข้อมูลได้จากการรวบรวมผลทดสอบ อาจมีผิดพลาดได้</div>
                <div class="text-danger">*ผลทดสอบอาจมีผิดพลาด รุ่นไหน ขึ้นเล่นได้แต่เล่นไม่ได้ หรือ ขึ้นเล่นไม่ได้แต่เล่นได้ โปรดแจ้งมาทางเพจ</div>
                <p>สร้างโดย keRLos กดติดตามได้ที่ เพจ <a href="https://www.facebook.com/kerlosth/" target="_blank">keRLos https://www.facebook.com/kerlosth</a></p>
            </div>
        </div>
        <div class="row">
            <form class="form-inline mb-3">
                <h3>พิมพ์ชื่อรุ่น</h3>
                <div class="form-group ml-4">
                    <input class="devname form-control" type="text"></input> 
                </div>
                <div class="form-group ml-2">
                    <button class="form-control btn btn-primary submit">ค้นหา</button>
                </div>
            </form>
        </div>
        <div class="row api table-responsive table-hover">
            <table class="table table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th style="width:35%">รุ่น</th>
                        <th style="width:25%">CPU</th>
                        <th style="width:20%">RAM</th>
                        <th style="width:20%">เล่นได้มั้ย</th></tr>
                </thead>
                <tbody>

                </tobdy>
            </table>
        </div>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://fonoapi.freshpixl.com/assets/js/fonoapi.jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-loading-overlay/2.1.6/loadingoverlay.min.js"></script>
<script>
    var ramRegex = /([0-9.]+)\sGB\sRAM/g
    var cpuRegex = /(([0-9])x)?([0-9.]+)\sghz/g
    var supportedDevices = [
        //xiaomi
        "xiaomi mi 3",
        "xiaomi mi 4c",
        "xiaomi mi 4s",
        "xiaomi mi 5c",
        "xiaomi mi 5s plus",
        "xiaomi mi 5s",
        "xiaomi mi 5x",
        "xiaomi mi 5",
        "xiaomi mi 6",
        "xiaomi mi 6x",
        "xiaomi mi 8",
        "xiaomi mi 8 se",
        "xiaomi mi 9",
        "xiaomi mi 9 se",
        "xiaomi mi note",
        "xiaomi mi note 2",
        "xiaomi mi note 3",
        "xiaomi mi max",
        "xiaomi mi max 2",
        "xiaomi mi max 3",
        "xiaomi mi max 4",
        "xiaomi mi mix",
        "xiaomi mi mix 2",
        "xiaomi mi mix 2s",
        "xiaomi mi mix 3",
        "xiaomi redmi 6 pro",
        "xiaomi redmi 7",
        "xiaomi redmi note 3",
        "xiaomi redmi note 4x",
        "xiaomi redmi note 5",
        "xiaomi redmi note 7",
        "xiaomi redmi note 7 pro",

        //huawei
        "huawei mate rs porsche design",
        "huawei mate 10 porsche design",
        "huawei mate 10",
        "huawei mate 10 pro",
        "huawei mate 10 lite",
        "huawei mate 9",
        "huawei mate 9 pro",
        "huawei mate 9 porsche design",
        "huawei nova 2",
        "huawei nova 4",
        "huawei nova 4e",
        "huawei nova 5",
        "huawei nova 3i",
        "huawei nova 2 plus",
        "huawei nova 5i",
        "huawei nova 5i pro",
        "huawei note 8",
        "huawei note 10",
        "huawei note 20",
        "huawei p20 pro",
        "huawei p20 lite",
        "huawei p20",
        "huawei p30",
        "huawei p30 pro",
        "huawei p30 lite",
        "huawei honor 8",
        "huawei honor 8 pro",
        "huawei honor note 8",
        "huawei honor note 9",
        "huawei honor note 10",
        "huawei honor 9",
        "huawei honor 9 lite",
        "huawei honor v8",
        "huawei honor v9",
        "huawei honor v20",
        "huawei honor 10",

        //apple
        "apple iphone xs",
        "apple iphone x",
        "apple iphone xr",
        "apple iphone xs max",
        "apple iphone 8",
        "apple iphone 8 plus",
        "apple iphone 7",
        "apple iphone 7 plus",
        "apple iphone 6s",
        "apple iphone 6s plus",
        "apple iphone se",
        "apple ipad pro 11",
        "apple ipad pro",
        "apple ipad pro 9.7",
        "apple ipad pro 10.5 (2017)",
        "apple ipad pro 12.9 (2017)",
        "apple ipad 9.7 (2017)",
        "apple ipad 10.5 (2017)",
        "apple ipad 12.9 (2017)",
        "apple ipad mini (2019)",
        "apple ipad air (2019)",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",
        "apple ipad se",

        //oppo
        "oppo a9",
        "oppo k3",
        "oppo a9x",
        "oppo reno",
        "oppo reno z",
        "oppo r17",
        "oppo reno 10",
        "oppo find x",
        "oppo a7x",
        "oppo a3",
        "oppo r15",
        "oppo r15 pro",
        "oppo r9",
        "oppo r9s",
        "oppo r9 plus",
        "oppo r9s plus",
        "oppo r11",
        "oppo a83",
        "oppo r17",
        "oppo r17 pro",
        "oppo r15",
        "oppo r15x",
        "oppo r15 pro",
        "oppo r21",
        "oppo r19",
        "oppo a79",
        "oppo r11",
        "oppo r11 plus",
        "oppo a73",
        "oppo find x 2",
        "oppo r11s",
        "oppo r20",

        //vivo
        "vivo y7s",
        "vivo y3",
        "vivo x27",
        "vivo z5",
        "vivo z5x",
        "vivo iqoo",
        "vivo s1",
        "vivo x23",
        "vivo z3",
        "vivo s1",
        "vivo s1 pro",
        "vivo y93s",
        "vivo x27 pro",
        "vivo x21",
        "vivo y97",
        "vivo z3i",
        "vivo z1",
        "vivo x20",
        "vivo x9",
        "vivo z3x",
        "vivo y83",
        "vivo y91",
        "vivo nex dual display",
        "vivo x30",
        "vivo x9i",
        "vivo x9 plus",
        "vivo x9s",
        "vivo x9",
        "vivo x9s plus",
        "vivo x7",
        "vivo x25",
        "vivo x23",
        "vivo y89",
        "vivo y81s",
        "vivo next",
        "vivo z1i",
        "vivo x7 plus",
        "vivo x20 plus",
        "vivo y75",
        "vivo x21i",
        "vivo x9s",
        "vivo x21",
        "vivo x21s",
        "vivo xplay5",
        "vivo xplay6",
        "vivo xplay7",
        "vivo x9",
        "vivo x9 plus",
        "vivo x9s",
        "vivo x9s plus",
        "vivo z1",
        "vivo y97",
        "vivo y91c",
        "vivo x21",
        "vivo v15",
        "vivo x6s",
        "vivo x30",
        "vivo x30 plus",
        "vivo x6s plus",
        "vivo apex",
        "vivo v5",
        "vivo v5 plus",
        "vivo v5s",
        "vivo v5 lite",
        "vivo xplay3s",
        "vivo xplay5 elite",
        "vivo xshot",

        //oneplus
        "oneplus 3",
        "oneplus 3t",
        "oneplus 5",
        "oneplus 5t",
        "oneplus 6",
        "oneplus 6t",
        "oneplus 7",
        "oneplus 7 pro",

        //nubia
        "zte nubia x",
        "zte nubia z17",
        "zte nubia z17s",
        "zte nubia z11",
        "zte nubia z17 mini",
        "zte nubia z11 mini",
        "zte nubia z11 mini s",
        "zte nubia z9 mini",
        "zte nubia z9 max",
        "zte nubia my plague",
        "zte nubia z9",

        //meizu
        "meizu 16s",
        "meizu pro 7 plus",
        "meizu pro 7",
        "meizu pro 5",
        "meizu pro 5 mini",
        "meizu pro 6",
        "meizu pro 6s",
        "meizu pro 6 plus",
        "meizu mx6",
        "meizu mx5",
        "meizu mx4",
        "meizu mx4 pro",
        "meizu mx5e",
        "meizu note 9",

        //others
        "google pixel 2",
        "google pixel 2 xl",
        "google pixel 3",
        "google pixel 3 xl",
        "google pixel 3 lite",
        "razer phone",
        "sony xperia xz premium",
    ]

    var unsupportedDevices = [

    ]

    function checkCompatible(deviceName, ram, cpu) {
        deviceName = deviceName.toLowerCase()
        if(supportedDevices.includes(deviceName)) {
            return 1
        }

        if(unsupportedDevices.includes(deviceName)) {
            return 0
        }
        if(ram == "" || cpu == "") {
            return -2
        }

        ramOk = false
        if (ram != "") {
            matches = ram.matchAll(ramRegex)
            //console.log(matches)
            i = matches.next()
            
            while(!i.done) {
                m = i.value
                ram = parseFloat(m[1])
                if(ram >=2) {
                    ramOk = true
                    break
                }
                i = matches.next()
            }
        } else {
            ram = 0
        }

        if(ram < 2 || !ramOk) {
            return 0
        }

        cpu = cpu.toLowerCase()
        if(cpu.includes("octa-core") || cpu.includes("hexa-core")) {
            return 2
        }

        if(cpu.includes("quad-core")) {
            matches = cpu.matchAll(cpuRegex)

            i = matches.next()
            while(!i.done) {
                m = i.value
                if(m[1] == undefined) { // real quad core
                    cpu = parseFloat(m[3])
                    if(cpu >= 1.2) {
                        return 2
                    }
                } else {
                    cpuCount = parseInt(m[2])
                    if(cpuCount < 4) {
                        return -1
                    }
                }
                i = matches.next()
            }
        }
        return -1
    }

    $(function(){
        $('.submit').on('click', function(e) {
            e.preventDefault();
            $.LoadingOverlay("show");
            $('.api table tbody').fonoApi({
                token : "3b912b899bdd527c21d3129b4749613c8c7ed67498f08b7e",
                device : $('.devname').val(),
                limit : 100,
                onComplete: function() {
                    $.LoadingOverlay("hide", true);
                },
                template : function() {
                    return $.map(arguments, function(obj, i) {
                        var deviceName = obj['DeviceName'] != undefined ? obj['DeviceName'] : "";
                        var cpu = obj['cpu'] != undefined ? obj['cpu'] : "";
                        var ram = obj['internal'] != undefined ? obj['internal'] : "";
                        var supported = checkCompatible(deviceName, ram, cpu)
                        content = "<tr"
                        switch (supported){
                            case 1:
                                content += ' class="table-success">'
                                break;
                            case 2:
                                content += ' class="table-info">'
                                break;
                            case 0:
                                content += ' class="table-danger">'
                                break;
                            default:
                                content += ' class="table-warning">'
                                break;
                        }
                        content += "<td>" + deviceName + "</td><td>" + cpu + "</td><td>" + ram + "</td>"
                        switch (supported) {
                            case 1:
                                content += "<td><b>เล่นได้</b></td>"
                                break;
                            case 2:
                                content += "<td><b>น่าจะเล่นได้</b></td>"
                                break;
                            case 0:
                                content += "<td><b>เล่นไม่ได้</b></td>"
                                break;
                            default:
                                content += "<td><b>อาจจะเล่นไม่ได้</b></td>"
                                break;
                        }
                        content += "</tr>"
                        return content
                    });

                }
            });

        });
    })
</script>
</body>
</html>